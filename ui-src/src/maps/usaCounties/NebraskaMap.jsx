import React, { useState, useCallback } from "react";
import useGameStore from "../../store";
import { getMapThemeColors, getRegionStyle } from "../../utils/mapHeatmapUtils";
import "../JapanMap.css";

const COUNTY_DATA = {
  Adams: { gameId: "USA_NE_001", name: "Adams" },
  Antelope: { gameId: "USA_NE_003", name: "Antelope" },
  Arthur: { gameId: "USA_NE_005", name: "Arthur" },
  Banner: { gameId: "USA_NE_007", name: "Banner" },
  Blaine: { gameId: "USA_NE_009", name: "Blaine" },
  Boone: { gameId: "USA_NE_011", name: "Boone" },
  "Box Butte": { gameId: "USA_NE_013", name: "Box Butte" },
  Boyd: { gameId: "USA_NE_015", name: "Boyd" },
  Brown: { gameId: "USA_NE_017", name: "Brown" },
  Buffalo: { gameId: "USA_NE_019", name: "Buffalo" },
  Burt: { gameId: "USA_NE_021", name: "Burt" },
  Butler: { gameId: "USA_NE_023", name: "Butler" },
  Cass: { gameId: "USA_NE_025", name: "Cass" },
  Cedar: { gameId: "USA_NE_027", name: "Cedar" },
  Chase: { gameId: "USA_NE_029", name: "Chase" },
  Cherry: { gameId: "USA_NE_031", name: "Cherry" },
  Cheyenne: { gameId: "USA_NE_033", name: "Cheyenne" },
  Clay: { gameId: "USA_NE_035", name: "Clay" },
  Colfax: { gameId: "USA_NE_037", name: "Colfax" },
  Cuming: { gameId: "USA_NE_039", name: "Cuming" },
  Custer: { gameId: "USA_NE_041", name: "Custer" },
  Dakota: { gameId: "USA_NE_043", name: "Dakota" },
  Dawes: { gameId: "USA_NE_045", name: "Dawes" },
  Dawson: { gameId: "USA_NE_047", name: "Dawson" },
  Deuel: { gameId: "USA_NE_049", name: "Deuel" },
  Dixon: { gameId: "USA_NE_051", name: "Dixon" },
  Dodge: { gameId: "USA_NE_053", name: "Dodge" },
  Douglas: { gameId: "USA_NE_055", name: "Douglas" },
  Dundy: { gameId: "USA_NE_057", name: "Dundy" },
  Fillmore: { gameId: "USA_NE_059", name: "Fillmore" },
  Franklin: { gameId: "USA_NE_061", name: "Franklin" },
  Frontier: { gameId: "USA_NE_063", name: "Frontier" },
  Furnas: { gameId: "USA_NE_065", name: "Furnas" },
  Gage: { gameId: "USA_NE_067", name: "Gage" },
  Garden: { gameId: "USA_NE_069", name: "Garden" },
  Garfield: { gameId: "USA_NE_071", name: "Garfield" },
  Gosper: { gameId: "USA_NE_073", name: "Gosper" },
  Grant: { gameId: "USA_NE_075", name: "Grant" },
  Greeley: { gameId: "USA_NE_077", name: "Greeley" },
  Hall: { gameId: "USA_NE_079", name: "Hall" },
  Hamilton: { gameId: "USA_NE_081", name: "Hamilton" },
  Harlan: { gameId: "USA_NE_083", name: "Harlan" },
  Hayes: { gameId: "USA_NE_085", name: "Hayes" },
  Hitchcock: { gameId: "USA_NE_087", name: "Hitchcock" },
  Holt: { gameId: "USA_NE_089", name: "Holt" },
  Hooker: { gameId: "USA_NE_091", name: "Hooker" },
  Howard: { gameId: "USA_NE_093", name: "Howard" },
  Jefferson: { gameId: "USA_NE_095", name: "Jefferson" },
  Johnson: { gameId: "USA_NE_097", name: "Johnson" },
  Kearney: { gameId: "USA_NE_099", name: "Kearney" },
  Keith: { gameId: "USA_NE_101", name: "Keith" },
  "Keya Paha": { gameId: "USA_NE_103", name: "Keya Paha" },
  Kimball: { gameId: "USA_NE_105", name: "Kimball" },
  Knox: { gameId: "USA_NE_107", name: "Knox" },
  Lancaster: { gameId: "USA_NE_109", name: "Lancaster" },
  Lincoln: { gameId: "USA_NE_111", name: "Lincoln" },
  Logan: { gameId: "USA_NE_113", name: "Logan" },
  Loup: { gameId: "USA_NE_115", name: "Loup" },
  McPherson: { gameId: "USA_NE_117", name: "McPherson" },
  Madison: { gameId: "USA_NE_119", name: "Madison" },
  Merrick: { gameId: "USA_NE_121", name: "Merrick" },
  Morrill: { gameId: "USA_NE_123", name: "Morrill" },
  Nance: { gameId: "USA_NE_125", name: "Nance" },
  Nemaha: { gameId: "USA_NE_127", name: "Nemaha" },
  Nuckolls: { gameId: "USA_NE_129", name: "Nuckolls" },
  Otoe: { gameId: "USA_NE_131", name: "Otoe" },
  Pawnee: { gameId: "USA_NE_133", name: "Pawnee" },
  Perkins: { gameId: "USA_NE_135", name: "Perkins" },
  Phelps: { gameId: "USA_NE_137", name: "Phelps" },
  Pierce: { gameId: "USA_NE_139", name: "Pierce" },
  Platte: { gameId: "USA_NE_141", name: "Platte" },
  Polk: { gameId: "USA_NE_143", name: "Polk" },
  "Red Willow": { gameId: "USA_NE_145", name: "Red Willow" },
  Richardson: { gameId: "USA_NE_147", name: "Richardson" },
  Rock: { gameId: "USA_NE_149", name: "Rock" },
  Saline: { gameId: "USA_NE_151", name: "Saline" },
  Sarpy: { gameId: "USA_NE_153", name: "Sarpy" },
  Saunders: { gameId: "USA_NE_155", name: "Saunders" },
  "Scotts Bluff": { gameId: "USA_NE_157", name: "Scotts Bluff" },
  Seward: { gameId: "USA_NE_159", name: "Seward" },
  Sheridan: { gameId: "USA_NE_161", name: "Sheridan" },
  Sherman: { gameId: "USA_NE_163", name: "Sherman" },
  Sioux: { gameId: "USA_NE_165", name: "Sioux" },
  Stanton: { gameId: "USA_NE_167", name: "Stanton" },
  Thayer: { gameId: "USA_NE_169", name: "Thayer" },
  Thomas: { gameId: "USA_NE_171", name: "Thomas" },
  Thurston: { gameId: "USA_NE_173", name: "Thurston" },
  Valley: { gameId: "USA_NE_175", name: "Valley" },
  Washington: { gameId: "USA_NE_177", name: "Washington" },
  Wayne: { gameId: "USA_NE_179", name: "Wayne" },
  Webster: { gameId: "USA_NE_181", name: "Webster" },
  Wheeler: { gameId: "USA_NE_183", name: "Wheeler" },
  York: { gameId: "USA_NE_185", name: "York" },
};

const countyPathData = {
  York: "M 564.56 240.57 585.23 240.01 606 239.37 607.24 281 565.74 282.17 565.65 282.17 564.56 240.57 Z",
  "Scotts Bluff":
    "M 6.65 120.35 22.66 121.25 59.45 122.35 64.67 122.64 68.07 122.84 67.43 143.49 66.93 153.84 66.23 153.85 66.03 159.11 55.75 158.67 31.61 157.85 4.94 156.65 6.65 120.35 Z",
  Hooker:
    "M 240.87 116.96 288.76 117.98 292.54 118.12 292.46 159.71 283.41 159.66 267.13 159.18 241.98 158.72 240.24 158.7 240.87 116.96 Z",
  Banner:
    "M 4.94 156.65 31.61 157.85 55.75 158.67 66.03 159.11 65.39 182.93 64.93 190.36 64.6 195.5 63.96 195.48 57.63 195.34 26.23 194.1 3.28 193.04 4.94 156.65 Z",
  Blaine:
    "M 344.05 118.69 352.96 118.75 370.27 118.83 395.76 118.69 395.91 143.51 395.92 160.03 371.21 160.17 367.49 160.27 345.39 160.11 344.12 160.1 344.05 118.69 Z",
  Arthur:
    "M 190.15 157.81 206.29 158.19 240.24 158.7 241.98 158.72 241.23 200.3 212.17 199.79 189.28 199.33 190.15 157.81 Z",
  "Keya Paha":
    "M 350.47 9.57 375.05 9.64 394.29 9.62 433.33 9.35 433.47 20.51 433.16 20.86 433.31 32.55 431.74 33.69 429.52 33.55 426.34 35.46 422.68 35.27 420.78 36.58 419.4 36.5 417.49 38.73 415.25 38.98 414.57 40.58 408.67 43.09 404.77 42.33 400.91 42.35 397.87 41.05 396.3 41.55 393.35 42.02 389.7 40.77 387.71 41.09 383.82 40.11 382.23 38.82 380.66 38.97 380.03 37.04 376.87 37.47 372.53 36.57 370.63 36.63 367.2 34.71 362.96 35.08 357.9 33.37 355.97 32.31 356.05 30.79 354.65 29.43 351.36 28.82 350.42 27.81 350.47 9.57 Z",
  Garfield:
    "M 437.1 118.2 478.2 117.65 478.89 158.13 478.97 159.28 438.43 159.73 437.55 159.71 437.1 118.2 Z",
  Greeley:
    "M 479.59 159.27 503.23 158.88 520.45 158.48 520.88 158.47 521.46 189.61 521.66 199.99 491.68 200.52 480.9 200.65 480.25 200.68 480.16 190.32 479.59 159.27 Z",
  "Box Butte":
    "M 62.93 70.65 81.34 71.35 102.21 72.05 122.32 72.47 124.43 72.54 123.93 82.44 124.25 83.06 123.98 95.26 124.14 103.91 123.75 114.11 127.3 114.18 127.17 119.13 127.38 124.7 112.7 124.72 88.72 123.58 76.69 123.29 68.07 122.84 64.67 122.64 65.07 112.26 61.29 112.07 62.93 70.65 Z",
  Deuel:
    "M 132.34 218.55 163.41 219.44 182.39 219.91 181.91 240.72 182.12 245.94 182.12 246.12 160.43 245.59 130.59 244.7 130.77 239.27 131.74 239.28 132.34 218.55 Z",
  Saunders:
    "M 646.06 189.42 652.23 190.09 653.92 190.71 657.9 189.38 660.4 189.34 663.86 191.53 667.14 191.9 670.58 190.78 676.39 190.67 681.92 193.93 683.19 195.1 685.46 195.1 686.53 196.61 689.76 198.17 691.48 201.91 691.53 204.26 695.3 207.23 696.91 209.95 695.72 213.72 697.21 217.24 699.38 218.85 700.65 224.3 700.45 226.11 701.24 227.7 699.34 229.66 698.8 231.74 700.86 236.14 698.16 236.26 698.27 239.8 687.92 240.14 687.78 236.67 647.57 238.1 646.58 211.59 646.1 196.51 646.06 189.42 Z",
  Antelope:
    "M 518.41 75.29 548.92 74.58 559.66 74.28 560.15 95.95 560.69 115.88 561.32 136.62 540.65 137.23 520.05 137.7 519.66 116.9 519.2 116.92 518.41 75.29 Z",
  Morrill:
    "M 68.07 122.84 76.69 123.29 88.72 123.58 112.7 124.72 127.38 124.7 129.19 124.7 128.38 147.5 128.43 150.8 129.4 156.07 131.95 156.19 131.69 161.4 130.78 192.52 94.06 191.35 64.93 190.36 65.39 182.93 66.03 159.11 66.23 153.85 66.93 153.84 67.43 143.49 68.07 122.84 Z",
  Adams:
    "M 484.19 283.75 524.08 283.13 524.51 283.12 525.34 324.72 484.57 325.42 483.94 284.85 484.19 283.75 Z",
  Dakota:
    "M 665.73 60.51 666.27 61.78 668.3 62.79 672.27 60.73 675.2 61.83 677.44 65.03 679.73 65.26 682.33 63.88 686.73 64.48 687.68 65.59 688.29 68.93 687.74 70.62 685.71 73.29 685.52 75.39 686.18 77.43 685.43 79.55 686.41 82.06 688.58 83.35 689.92 85.09 690.15 87.35 691.29 89.14 658.44 90.28 657.77 72.01 658.13 71.2 657.71 60.78 665.73 60.51 Z",
  Harlan:
    "M 401.68 326.13 422.2 326.08 442.93 325.89 443.35 367.59 402.06 367.89 401.86 357.46 401.68 326.13 Z",
  Knox: "M 516.53 22.01 521.08 22.9 524.51 25.37 528.84 27.2 530.86 26.81 532.58 29.02 541.01 35.65 544.07 35.7 546.05 34.85 548.47 34.83 552.36 31.24 553.75 29.01 554.8 24.02 557.41 22.87 563.7 24.86 568.45 25.02 571.46 25.54 574.94 24.83 578.68 23.44 582.4 24.63 585.03 24.25 587.38 23.18 589.16 24.09 589.55 39.58 590.56 73.34 559.66 74.28 548.92 74.58 518.41 75.29 517.95 75.3 517.22 36.52 516.72 33.73 516.53 22.01 Z",
  Brown:
    "M 350.42 27.81 351.36 28.82 354.65 29.43 356.05 30.79 355.97 32.31 357.9 33.37 362.96 35.08 367.2 34.71 370.63 36.63 372.53 36.57 376.87 37.47 380.03 37.04 380.66 38.97 382.23 38.82 383.82 40.11 387.71 41.09 389.7 40.77 393.35 42.02 396.3 41.55 396.58 77.02 397.67 76.99 397.95 118.69 395.76 118.69 370.27 118.83 352.96 118.75 353.05 77.19 351.66 77.17 351.74 35.6 350.39 35.59 350.42 27.81 Z",
  Dawson:
    "M 347.59 243.01 379.16 242.96 382.07 243.02 411.22 242.96 419.83 242.88 419.95 254.5 419.96 273.95 420.05 284.34 420.97 284.33 420.91 287.79 418.44 286.96 416.56 287.35 410.79 287.34 409.73 286.73 405.79 287.12 402.25 286.07 400.33 286.22 395.24 284.44 369.55 284.48 347.57 284.42 347.53 260.32 347.59 243.01 Z",
  Wayne:
    "M 601.29 83.39 632.3 82.45 632.67 92.83 649.99 92.23 650.65 113.02 633.24 113.62 602.17 114.59 601.29 83.39 Z",
  Pawnee:
    "M 691.62 330.21 727.94 328.66 733.11 328.48 734.5 359.65 721.31 360.26 692.89 361.42 691.62 330.21 Z",
  Logan:
    "M 304.19 159.89 344.12 160.1 345.39 160.11 345.21 173.86 345.18 193.88 345.28 201.55 303.69 201.29 303.82 180.59 304.19 159.89 Z",
  Nance:
    "M 521.46 189.61 538.7 189.24 538.64 187.5 543.88 187.31 543.85 185.57 557.76 185.14 557.8 183.41 562.8 183.25 574.13 182.88 574.53 198.65 574.65 208.9 557.29 209.45 557.36 211.19 543.37 211.58 543.41 213.33 539.04 213.41 539.09 215.16 523.41 215.45 523.24 199.96 522.09 199.98 521.66 199.99 521.46 189.61 Z",
  Johnson:
    "M 690.35 299.05 711.05 298.2 726.49 297.47 727.53 318.25 727.94 328.66 691.62 330.21 690.35 299.05 Z",
  Keith:
    "M 182.39 219.91 182.92 199.16 189.28 199.33 212.17 199.79 241.23 200.3 253.61 200.55 252.94 242.1 254.77 242.13 254.71 247.32 239.12 247.23 215.75 246.73 202.8 246.53 183.8 246.07 182.12 245.94 181.91 240.72 182.39 219.91 Z",
  Perkins:
    "M 182.12 245.94 183.8 246.07 202.8 246.53 215.75 246.73 239.12 247.23 254.71 247.32 254.7 259.64 254.36 283.92 245.5 283.76 236.89 283.62 219.81 283.07 181.29 282.56 182.12 246.12 182.12 245.94 Z",
  Sherman:
    "M 439.6 201.15 480.25 200.68 480.9 200.65 480.86 210.49 480.96 235.21 481.12 242.21 439.59 242.66 439.68 214.33 439.6 201.15 Z",
  Lancaster:
    "M 648.6 279.71 648.82 279.7 648.13 258.9 647.35 238.1 647.57 238.1 687.78 236.67 687.92 240.14 689.06 267.87 690.35 299.05 680.45 299.35 669.32 299.87 649.42 300.54 648.6 279.71 Z",
  Cuming:
    "M 633.24 113.62 650.65 113.02 674.52 112.16 674.93 121.01 676.2 153.74 644.82 154.83 634.62 155.17 633.24 113.62 Z",
  Stanton:
    "M 602.17 114.59 633.24 113.62 634.62 155.17 613.82 155.84 603.47 156.15 602.17 114.59 Z",
  Merrick:
    "M 522.09 199.98 523.24 199.96 523.41 215.45 539.09 215.16 539.04 213.41 543.41 213.33 543.37 211.58 557.36 211.19 557.29 209.45 574.65 208.9 574.53 198.65 584.01 198.37 584.23 205.77 584.29 207.67 581.37 209 578.89 209.3 573.85 214.29 569.43 217.92 566.44 222.97 564 225.41 562.35 228.27 558.98 232.56 551.74 236.21 551.4 235.59 547.82 237.84 546.45 240.17 543.97 242.11 540.89 245.54 539.84 245.68 535.77 248.69 533.72 252.26 530.39 254.5 524.35 261.45 523.7 262.76 523.3 241.52 522.86 241.53 522.09 199.98 Z",
  Custer:
    "M 345.39 160.11 367.49 160.27 371.21 160.17 395.92 160.03 423.42 159.74 437.55 159.71 438.43 159.73 438.77 201.15 439.6 201.15 439.68 214.33 439.59 242.66 419.83 242.88 411.22 242.96 382.07 243.02 379.16 242.96 347.59 243.01 346.33 243.02 346.42 229.22 346.76 215.41 346.63 201.55 345.28 201.55 345.18 193.88 345.21 173.86 345.39 160.11 Z",
  Garden:
    "M 129.19 124.7 146.75 124.96 167.26 125.45 183.65 125.73 182.79 157.66 190.15 157.81 189.28 199.33 182.92 199.16 182.39 219.91 163.41 219.44 132.34 218.55 133.06 197.82 130.6 197.73 130.78 192.52 131.69 161.4 131.95 156.19 129.4 156.07 128.43 150.8 128.38 147.5 129.19 124.7 Z",
  Phelps:
    "M 400.33 286.22 402.25 286.07 405.79 287.12 409.73 286.73 410.79 287.34 416.56 287.35 418.44 286.96 420.91 287.79 424.67 288.55 428.62 287.67 431.29 288.5 436.64 289.04 442.59 288.84 442.93 325.89 422.2 326.08 401.68 326.13 400.6 326.12 400.41 318.38 400.33 286.22 Z",
  Hamilton:
    "M 523.7 262.76 524.35 261.45 530.39 254.5 533.72 252.26 535.77 248.69 539.84 245.68 540.89 245.54 543.97 242.11 546.45 240.17 547.82 237.84 551.4 235.59 551.74 236.21 558.98 232.56 562.35 228.27 564 225.41 564.56 240.57 565.65 282.17 524.51 283.12 524.08 283.13 523.7 262.76 Z",
  Kimball:
    "M 3.28 193.04 26.23 194.1 57.63 195.34 63.96 195.48 63.73 206.06 62.51 236.95 61.9 236.92 61.68 242.35 51.28 242.01 1 239.84 1.85 221.22 3.28 193.04 Z",
  Valley:
    "M 438.43 159.73 478.97 159.28 479.59 159.27 480.16 190.32 480.25 200.68 439.6 201.15 438.77 201.15 438.43 159.73 Z",
  "Red Willow":
    "M 298.53 326.09 313.86 326.19 334.44 326.09 343.29 326.38 349.8 326.31 350 335.1 350.09 367.98 324.79 367.86 298.13 367.6 298.32 349.19 298.11 346.96 298.53 326.09 Z",
  Wheeler:
    "M 478.2 117.65 519.2 116.92 519.66 116.9 520.05 137.7 520.45 158.48 503.23 158.88 479.59 159.27 478.97 159.28 478.89 158.13 478.2 117.65 Z",
  Jefferson:
    "M 608.48 322.62 633.47 321.9 649.85 321.33 651.3 362.95 639.06 363.4 609.7 364.26 608.48 322.62 Z",
  Douglas:
    "M 685.46 195.1 698.2 194.58 733.41 193.01 734.15 196.38 731.92 198.34 732.3 199.43 734.87 201.43 738.22 201.64 739.9 204.35 739 206.12 737.23 207.16 736.3 206.47 736.77 203.89 734.84 204.28 734.83 206.32 736.21 207.45 735.62 209.02 736.63 211.43 735.38 215.77 735.82 217.07 699.38 218.85 697.21 217.24 695.72 213.72 696.91 209.95 695.3 207.23 691.53 204.26 691.48 201.91 689.76 198.17 686.53 196.61 685.46 195.1 Z",
  Seward:
    "M 606 239.37 647.35 238.1 648.13 258.9 648.82 279.7 648.6 279.71 607.24 281 606 239.37 Z",
  Loup: "M 395.76 118.69 397.95 118.69 425.05 118.44 436.04 118.2 437.1 118.2 437.55 159.71 423.42 159.74 395.92 160.03 395.91 143.51 395.76 118.69 Z",
  Cedar:
    "M 589.16 24.09 592.93 24.48 595.08 22.06 598.63 22.04 600.17 23.23 601.78 23.06 604.78 21.56 606.3 22.96 609.93 22.86 612.58 23.92 613.49 28.26 618.77 29.74 620.57 32.5 622.32 32.75 625.81 32.28 630.79 33.4 632.17 72.08 632.3 82.45 601.29 83.39 600.98 73 590.56 73.34 589.55 39.58 589.16 24.09 Z",
  Nuckolls:
    "M 525.76 324.71 566.85 323.76 567.15 323.75 568.14 365.42 526.54 366.3 525.76 324.71 Z",
  Sheridan:
    "M 122.82 5.46 149.56 6.32 185.08 7.29 184.25 32.86 185.84 32.9 185.65 43.05 184.89 73.8 187.41 73.88 186.25 115.32 189.26 115.45 188.82 125.88 183.65 125.73 167.26 125.45 146.75 124.96 129.19 124.7 127.38 124.7 127.17 119.13 127.3 114.18 123.75 114.11 124.14 103.91 123.98 95.26 124.25 83.06 123.93 82.44 124.43 72.54 122.32 72.47 122.58 65.66 123.64 31.18 121.94 31.14 122.82 5.46 Z",
  Washington:
    "M 686.36 160.31 715.29 159.14 717.37 161.68 717.87 163.29 716.28 166.16 716.86 169.38 719.26 170.89 718.48 173.93 718.75 176.83 722.33 179.67 723.86 179.58 724.58 175.79 726.98 175.79 727.77 179.04 725.52 182.19 726.93 183.83 730.5 184.72 733.42 184.55 734.63 185.96 733.59 188.65 733.94 191.42 733.41 193.01 698.2 194.58 697.99 189.39 694.54 189.53 694.48 187.82 692.75 187.86 692.68 186.13 690.95 186.19 690.85 184.44 689.12 184.53 688.19 182.82 688.08 179.35 687.23 179.39 686.36 160.31 Z",
  Franklin:
    "M 442.93 325.89 467.07 325.66 484.31 325.43 484.58 339.32 484.97 367.06 443.35 367.59 442.93 325.89 Z",
  Hayes:
    "M 245.5 283.76 254.36 283.92 280.32 283.98 297.13 284.15 296.92 286.28 296.49 303.09 296.62 323.02 296.79 326.08 277.81 325.75 246.87 325.34 245.09 325.32 245.5 283.76 Z",
  Howard:
    "M 480.9 200.65 491.68 200.52 521.66 199.99 522.09 199.98 522.86 241.53 514.65 241.72 483.53 242.17 481.12 242.21 480.96 235.21 480.86 210.49 480.9 200.65 Z",
  Cass: "M 687.92 240.14 698.27 239.8 698.16 236.26 700.86 236.14 704.12 238.78 707.18 239.01 708.88 241.07 711.2 241.6 716.78 238.72 719.76 234.9 724.52 232.66 726.52 232.49 731.3 233.88 734.3 233.09 739.65 232.78 740.56 233.35 742.24 234.93 742.49 236.6 741.71 238.55 742.32 239.96 745.12 241.59 745.65 242.79 744.75 246.72 745.21 248.89 747.32 251.02 747.63 253.25 744.51 255.78 745.63 259.2 745.22 263 746.2 265.34 701.06 267.42 689.06 267.87 687.92 240.14 Z",
  Webster:
    "M 484.31 325.43 484.57 325.42 525.34 324.72 525.76 324.71 526.54 366.3 484.97 367.06 484.58 339.32 484.31 325.43 Z",
  Madison:
    "M 560.69 115.88 602.17 114.59 603.47 156.15 562.09 157.42 561.93 157.42 561.32 136.62 560.69 115.88 Z",
  Platte:
    "M 562.09 157.42 603.47 156.15 613.82 155.84 615.13 197.42 615.08 198.74 611.94 196.87 610.4 196.88 607.55 198.08 604.72 197.6 597.44 201.13 590.96 202.13 586.71 205.2 584.23 205.77 584.01 198.37 574.53 198.65 574.13 182.88 562.8 183.25 562.52 176.44 562.09 157.42 Z",
  Rock: "M 396.3 41.55 397.87 41.05 400.91 42.35 404.77 42.33 408.67 43.09 414.57 40.58 415.25 38.98 417.49 38.73 419.4 36.5 420.78 36.58 422.68 35.27 426.34 35.46 429.52 33.55 431.74 33.69 433.31 32.55 434.32 35.14 434.79 76.75 435.72 76.76 436.04 118.2 425.05 118.44 397.95 118.69 397.67 76.99 396.58 77.02 396.3 41.55 Z",
  Pierce:
    "M 559.66 74.28 590.56 73.34 600.98 73 601.29 83.39 602.17 114.59 560.69 115.88 560.15 95.95 559.66 74.28 Z",
  Sioux:
    "M 60.27 3.08 59.41 28.89 61.41 28.97 60.76 44.08 59.76 70.53 62.93 70.65 61.29 112.07 65.07 112.26 64.67 122.64 59.45 122.35 22.66 121.25 6.65 120.35 9.41 60.83 10.29 42.89 12.22 1 33.19 1.86 60.27 3.08 Z",
  Chase:
    "M 181.29 282.56 219.81 283.07 236.89 283.62 245.5 283.76 245.09 325.32 213.89 324.87 180.29 324.2 181.29 282.56 Z",
  Richardson:
    "M 733.11 328.48 743.36 328.04 774.97 326.39 778.38 327.74 780.45 327.58 781.95 328.32 782.75 330.06 781.77 333.37 782.44 335.57 786.24 338.16 786.86 340.56 789.9 341.83 790.51 343.62 789.02 346.06 789.2 348.11 788.22 350 789.09 352.41 791.97 353.61 793.69 353 798.58 355.38 799 356.48 776.06 357.67 734.5 359.65 733.11 328.48 Z",
  Clay: "M 524.51 283.12 565.65 282.17 565.74 282.17 566.85 323.76 525.76 324.71 525.34 324.72 524.51 283.12 Z",
  Polk: "M 564 225.41 566.44 222.97 569.43 217.92 573.85 214.29 578.89 209.3 581.37 209 584.29 207.67 584.23 205.77 586.71 205.2 590.96 202.13 597.44 201.13 604.72 197.6 606 239.37 585.23 240.01 564.56 240.57 564 225.41 Z",
  Frontier:
    "M 297.13 284.15 309.09 284.25 347.57 284.42 369.55 284.48 369.6 315.77 359.2 315.73 359.22 326.18 349.8 326.31 343.29 326.38 334.44 326.09 313.86 326.19 298.53 326.09 296.79 326.08 296.62 323.02 296.49 303.09 296.92 286.28 297.13 284.15 Z",
  Hitchcock:
    "M 246.87 325.34 277.81 325.75 296.79 326.08 298.53 326.09 298.11 346.96 298.32 349.19 298.13 367.6 281.71 367.46 246.17 366.93 246.37 346.25 246.68 327.86 246.87 325.34 Z",
  Saline:
    "M 607.24 281 648.6 279.71 649.42 300.54 650.06 320.65 649.85 321.33 633.47 321.9 608.48 322.62 607.24 281 Z",
  Cheyenne:
    "M 63.96 195.48 64.6 195.5 64.93 190.36 94.06 191.35 130.78 192.52 130.6 197.73 133.06 197.82 132.34 218.55 131.74 239.28 130.77 239.27 130.59 244.7 108.44 244.07 63.24 242.46 61.68 242.35 61.9 236.92 62.51 236.95 63.73 206.06 63.96 195.48 Z",
  Sarpy:
    "M 699.38 218.85 735.82 217.07 737.09 217.82 741.11 217.16 743.31 218.65 742.33 219.85 740.59 219.6 739.81 222.53 741.42 225.58 741.88 229.08 740.59 231.4 740.56 233.35 739.65 232.78 734.3 233.09 731.3 233.88 726.52 232.49 724.52 232.66 719.76 234.9 716.78 238.72 711.2 241.6 708.88 241.07 707.18 239.01 704.12 238.78 700.86 236.14 698.8 231.74 699.34 229.66 701.24 227.7 700.45 226.11 700.65 224.3 699.38 218.85 Z",
  Gosper:
    "M 369.55 284.48 395.24 284.44 400.33 286.22 400.41 318.38 400.6 326.12 387.86 326.18 359.22 326.18 359.2 315.73 369.6 315.77 369.55 284.48 Z",
  Thurston:
    "M 649.99 92.23 658.54 91.94 658.44 90.28 691.29 89.14 693.6 91.09 694.43 94.59 693.36 95.95 691.58 96.47 692.44 98.88 692.61 102.22 695.22 104.52 696.13 106.17 698.93 107.14 700.05 108.67 699.19 113.04 699.88 116.22 696.63 116.43 696.77 120.19 683.34 120.53 674.93 121.01 674.52 112.16 650.65 113.02 649.99 92.23 Z",
  Cherry:
    "M 185.08 7.29 205.49 7.75 217.46 8.33 236.17 8.61 276.31 9.1 312.43 9.44 326.38 9.38 350.47 9.57 350.42 27.81 350.39 35.59 351.74 35.6 351.66 77.17 353.05 77.19 352.96 118.75 344.05 118.69 311.17 118.41 292.54 118.12 288.76 117.98 240.87 116.96 202.72 115.99 189.26 115.45 186.25 115.32 187.41 73.88 184.89 73.8 185.65 43.05 185.84 32.9 184.25 32.86 185.08 7.29 Z",
  Thayer:
    "M 567.15 323.75 608.48 322.62 609.7 364.26 596.63 364.66 568.14 365.42 567.15 323.75 Z",
  Butler:
    "M 604.72 197.6 607.55 198.08 610.4 196.88 611.94 196.87 615.08 198.74 619.96 198.39 622.12 199.37 629.65 197.22 632.66 194.77 636.35 194.49 637.86 193.71 640.83 190.99 644.7 189.14 646.05 189.05 646.06 189.42 646.1 196.51 646.58 211.59 647.57 238.1 647.35 238.1 606 239.37 604.72 197.6 Z",
  Kearney:
    "M 442.59 288.84 448.48 289.47 451.33 289.18 459.28 289.67 461.3 289.06 467.46 289.5 471.03 288.67 474.66 286.77 483.94 284.85 484.57 325.42 484.31 325.43 467.07 325.66 442.93 325.89 442.59 288.84 Z",
  Otoe: "M 689.06 267.87 701.06 267.42 746.2 265.34 744.62 267.59 741.92 269.85 741.53 271.78 742.13 273.46 744.35 274.5 746.03 278.07 747.9 279.21 750.98 280 752.75 282.31 752.95 284.09 754.75 285.84 754.68 287.79 752.83 290.19 753.99 293.16 753.54 294.57 754.71 295.79 759.02 295.84 755.35 296.12 726.49 297.47 711.05 298.2 690.35 299.05 689.06 267.87 Z",
  McPherson:
    "M 241.98 158.72 267.13 159.18 283.41 159.66 292.46 159.71 304.19 159.89 303.82 180.59 303.69 201.29 269.08 200.74 253.61 200.55 241.23 200.3 241.98 158.72 Z",
  Boyd: "M 433.33 9.35 464.45 9.02 499.69 8.44 500.44 10.89 502.53 14.49 505 16.77 506.66 16.29 513.62 19.88 515.1 21.57 516.53 22.01 516.72 33.73 517.22 36.52 514.07 35.45 512.38 35.84 507.42 34.97 503.31 36.18 500.91 35.45 497.28 35.28 495.74 34.46 492.64 34.74 486.15 31.34 484.59 32.12 481.62 32.09 476.75 29.22 473.77 29.69 471.9 29.02 469.96 27.2 466.28 27.75 461.14 23.22 459.8 21.53 457.35 21.28 454.35 22.53 450.87 25.4 447.4 26.19 444.62 27.66 442.35 27.97 440.17 29.47 437.63 30.26 433.31 32.55 433.16 20.86 433.47 20.51 433.33 9.35 Z",
  Furnas:
    "M 349.8 326.31 359.22 326.18 387.86 326.18 400.6 326.12 401.68 326.13 401.86 357.46 402.06 367.89 385.04 368 350.09 367.98 350 335.1 349.8 326.31 Z",
  Grant:
    "M 183.65 125.73 188.82 125.88 189.26 115.45 202.72 115.99 240.87 116.96 240.24 158.7 206.29 158.19 190.15 157.81 182.79 157.66 183.65 125.73 Z",
  Dodge:
    "M 644.82 154.83 676.2 153.74 686.13 153.36 686.36 160.31 687.23 179.39 688.08 179.35 688.19 182.82 689.12 184.53 690.85 184.44 690.95 186.19 692.68 186.13 692.75 187.86 694.48 187.82 694.54 189.53 697.99 189.39 698.2 194.58 685.46 195.1 683.19 195.1 681.92 193.93 676.39 190.67 670.58 190.78 667.14 191.9 663.86 191.53 660.4 189.34 657.9 189.38 653.92 190.71 652.23 190.09 646.06 189.42 646.05 189.05 644.82 154.83 Z",
  Colfax:
    "M 613.82 155.84 634.62 155.17 644.82 154.83 646.05 189.05 644.7 189.14 640.83 190.99 637.86 193.71 636.35 194.49 632.66 194.77 629.65 197.22 622.12 199.37 619.96 198.39 615.08 198.74 615.13 197.42 613.82 155.84 Z",
  Hall: "M 483.53 242.17 514.65 241.72 522.86 241.53 523.3 241.52 523.7 262.76 524.08 283.13 484.19 283.75 483.53 242.17 Z",
  Boone:
    "M 520.05 137.7 540.65 137.23 561.32 136.62 561.93 157.42 562.09 157.42 562.52 176.44 562.8 183.25 557.8 183.41 557.76 185.14 543.85 185.57 543.88 187.31 538.64 187.5 538.7 189.24 521.46 189.61 520.88 158.47 520.45 158.48 520.05 137.7 Z",
  Burt: "M 674.93 121.01 683.34 120.53 696.77 120.19 696.63 116.43 699.88 116.22 701.42 117.25 702.98 116.82 705.23 120.84 707.65 120.78 707.4 123.41 708.14 124.3 710.59 123.78 713.05 124.69 711.98 128.84 712.21 131.46 710.55 133.16 712.25 136.67 714.86 138.59 715.68 140.29 715.81 142.64 719.3 144.54 719.66 146.27 718.73 147.64 718.23 150.59 716.49 151.76 716.76 153.69 718.86 154.8 719.29 156.73 716.68 157.06 715.29 159.14 686.36 160.31 686.13 153.36 676.2 153.74 674.93 121.01 Z",
  Nemaha:
    "M 726.49 297.47 755.35 296.12 759.02 295.84 760.15 295.22 760.26 291.81 762.27 291.03 764.19 293.87 763.45 296.4 760.04 298.01 760.87 302.26 764.22 305.39 764.08 308.5 765.86 311.89 766.1 313.92 768.07 317.29 765.35 319.61 766.22 321.59 769.36 320.44 772.06 322.03 774.72 322.9 774.97 326.39 743.36 328.04 733.11 328.48 727.94 328.66 727.53 318.25 726.49 297.47 Z",
  Dawes:
    "M 60.27 3.08 122.82 5.46 121.94 31.14 123.64 31.18 122.58 65.66 122.32 72.47 102.21 72.05 81.34 71.35 62.93 70.65 59.76 70.53 60.76 44.08 61.41 28.97 59.41 28.89 60.27 3.08 Z",
  Lincoln:
    "M 253.61 200.55 269.08 200.74 303.69 201.29 345.28 201.55 346.63 201.55 346.76 215.41 346.42 229.22 346.33 243.02 347.59 243.01 347.53 260.32 347.57 284.42 309.09 284.25 297.13 284.15 280.32 283.98 254.36 283.92 254.7 259.64 254.71 247.32 254.77 242.13 252.94 242.1 253.61 200.55 Z",
  Fillmore:
    "M 565.74 282.17 607.24 281 608.48 322.62 567.15 323.75 566.85 323.76 565.74 282.17 Z",
  Holt: "M 433.31 32.55 437.63 30.26 440.17 29.47 442.35 27.97 444.62 27.66 447.4 26.19 450.87 25.4 454.35 22.53 457.35 21.28 459.8 21.53 461.14 23.22 466.28 27.75 469.96 27.2 471.9 29.02 473.77 29.69 476.75 29.22 481.62 32.09 484.59 32.12 486.15 31.34 492.64 34.74 495.74 34.46 497.28 35.28 500.91 35.45 503.31 36.18 507.42 34.97 512.38 35.84 514.07 35.45 517.22 36.52 517.95 75.3 518.41 75.29 519.2 116.92 478.2 117.65 437.1 118.2 436.04 118.2 435.72 76.76 434.79 76.75 434.32 35.14 433.31 32.55 Z",
  Gage: "M 649.85 321.33 650.06 320.65 649.42 300.54 669.32 299.87 680.45 299.35 690.35 299.05 691.62 330.21 692.89 361.42 651.3 362.95 649.85 321.33 Z",
  Thomas:
    "M 292.54 118.12 311.17 118.41 344.05 118.69 344.12 160.1 304.19 159.89 292.46 159.71 292.54 118.12 Z",
  Dixon:
    "M 630.79 33.4 633.75 33.42 635.68 35.74 635.56 38.13 637.85 38.18 640.51 36.38 644.65 37.79 646.18 38.78 649.5 39.6 649.99 43.41 653.4 44.51 656.56 43.8 660.18 45.31 658.57 48.7 658.33 50.77 660.69 54.29 665.03 57.23 665.73 60.51 657.71 60.78 658.13 71.2 657.77 72.01 658.44 90.28 658.54 91.94 649.99 92.23 632.67 92.83 632.3 82.45 632.17 72.08 630.79 33.4 Z",
  Dundy:
    "M 180.29 324.2 213.89 324.87 245.09 325.32 246.87 325.34 246.68 327.86 246.37 346.25 246.17 366.93 238.27 366.85 198.65 366.05 179.29 365.58 180.29 324.2 Z",
  Buffalo:
    "M 419.83 242.88 439.59 242.66 481.12 242.21 483.53 242.17 484.19 283.75 483.94 284.85 474.66 286.77 471.03 288.67 467.46 289.5 461.3 289.06 459.28 289.67 451.33 289.18 448.48 289.47 442.59 288.84 436.64 289.04 431.29 288.5 428.62 287.67 424.67 288.55 420.91 287.79 420.97 284.33 420.05 284.34 419.96 273.95 419.95 254.5 419.83 242.88 Z",
};

const countyOrderFromSVG = [
  "York",
  "Scotts Bluff",
  "Hooker",
  "Banner",
  "Blaine",
  "Arthur",
  "Keya Paha",
  "Garfield",
  "Greeley",
  "Box Butte",
  "Deuel",
  "Saunders",
  "Antelope",
  "Morrill",
  "Adams",
  "Dakota",
  "Harlan",
  "Knox",
  "Brown",
  "Dawson",
  "Wayne",
  "Pawnee",
  "Logan",
  "Nance",
  "Johnson",
  "Keith",
  "Perkins",
  "Sherman",
  "Lancaster",
  "Cuming",
  "Stanton",
  "Merrick",
  "Custer",
  "Garden",
  "Phelps",
  "Hamilton",
  "Kimball",
  "Valley",
  "Red Willow",
  "Wheeler",
  "Jefferson",
  "Douglas",
  "Seward",
  "Loup",
  "Cedar",
  "Nuckolls",
  "Sheridan",
  "Washington",
  "Franklin",
  "Hayes",
  "Howard",
  "Cass",
  "Webster",
  "Madison",
  "Platte",
  "Rock",
  "Pierce",
  "Sioux",
  "Chase",
  "Richardson",
  "Clay",
  "Polk",
  "Frontier",
  "Hitchcock",
  "Saline",
  "Cheyenne",
  "Sarpy",
  "Gosper",
  "Thurston",
  "Cherry",
  "Thayer",
  "Butler",
  "Kearney",
  "Otoe",
  "McPherson",
  "Boyd",
  "Furnas",
  "Grant",
  "Dodge",
  "Colfax",
  "Hall",
  "Boone",
  "Burt",
  "Nemaha",
  "Dawes",
  "Lincoln",
  "Fillmore",
  "Holt",
  "Gage",
  "Thomas",
  "Dixon",
  "Dundy",
  "Buffalo",
];

function NebraskaMap({
  onSelectCounty,
  selectedCountyGameId,
  heatmapData,
  viewType,
  onCountyHover,
  onCountyLeave,
}) {
  const [hoveredCountyId, setHoveredCountyId] = useState(null);
  const [tooltipData, setTooltipData] = useState(null);
  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });
  const currentTheme = useGameStore(
    (state) => state.availableThemes[state.activeThemeName]
  );

  const themeColors = getMapThemeColors(currentTheme);

  const getCountyStyle = useCallback(
    (svgId) => {
      return getRegionStyle({
        regionId: null,
        svgId,
        regionData: COUNTY_DATA,
        heatmapData,
        viewType,
        theme: themeColors,
        hoveredId: hoveredCountyId,
        selectedId: selectedCountyGameId,
        isClickable: !!onSelectCounty,
      });
    },
    [
      heatmapData,
      viewType,
      themeColors,
      hoveredCountyId,
      selectedCountyGameId,
      onSelectCounty,
    ]
  );

  const handleCountyClick = useCallback(
    (svgId) => {
      const county = COUNTY_DATA[svgId];
      if (county && onSelectCounty) {
        onSelectCounty(county.gameId, county.name);
      } else {
        console.warn(`No game data found for SVG ID: ${svgId}`);
      }
    },
    [onSelectCounty]
  );

  const handleMouseEnter = useCallback(
    (svgId, event) => {
      const countyInfo = COUNTY_DATA[svgId];
      if (!countyInfo) return;

      setHoveredCountyId(countyInfo.gameId);

      // Call the external hover handler if provided (for election night tooltips)
      if (onCountyHover) {
        onCountyHover(countyInfo.gameId, event);
      } else {
        // Fallback to internal tooltip for other uses
        if (viewType === "congressional_districts" && heatmapData?.mapData) {
          const mapDataItem = heatmapData.mapData.find(
            (item) => item.id === countyInfo.gameId
          );
          if (mapDataItem) {
            setTooltipData({
              name: countyInfo.name,
              isSplit: mapDataItem.isSplit,
              splitDetails: mapDataItem.splitDetails,
              districtLabel: mapDataItem.value,
            });
          }
        } else {
          setTooltipData({
            name: countyInfo.name,
            isSplit: false,
            splitDetails: null,
            districtLabel: null,
          });
        }

        setMousePosition({ x: event.clientX, y: event.clientY });
      }
    },
    [onCountyHover, viewType, heatmapData]
  );

  const handleMouseLeave = useCallback(() => {
    setHoveredCountyId(null);
    setTooltipData(null);

    // Call the external leave handler if provided
    if (onCountyLeave) {
      onCountyLeave();
    }
  }, [onCountyLeave]);

  const handleMouseMove = useCallback((event) => {
    setMousePosition({ x: event.clientX, y: event.clientY });
  }, []);

  const renderCountyPath = (svgId) => {
    const countyInfo = COUNTY_DATA[svgId];
    if (!countyInfo) {
      console.warn(`No COUNTY_DATA found for SVG ID: ${svgId}`);
      return null;
    }

    const pathD = countyPathData[svgId];
    if (!pathD) {
      console.warn(`Path data (d attribute) missing for ${svgId}`);
      return null;
    }

    return (
      <path
        key={svgId}
        id={svgId}
        title={countyInfo.name}
        className={`prefecture-path ${
          selectedCountyGameId === countyInfo.gameId ? "selected" : ""
        }`}
        style={getCountyStyle(svgId)}
        onMouseEnter={(e) => handleMouseEnter(svgId, e)}
        onMouseLeave={handleMouseLeave}
        onMouseMove={handleMouseMove}
        onClick={() => handleCountyClick(svgId)}
        d={pathD}
      />
    );
  };

  return (
    <>
      <svg
        version="1.2"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 810 379"
        className="interactive-japan-map nebraska-map"
        preserveAspectRatio="xMidYMid meet"
      >
        <g id="nebraska-counties-group" stroke="white" strokeWidth="1">
          {countyOrderFromSVG.map((svgId) => renderCountyPath(svgId))}
        </g>
      </svg>
      {tooltipData && !onCountyHover && (
        <div
          style={{
            position: "fixed",
            left: mousePosition.x + 10,
            top: mousePosition.y - 10,
            backgroundColor: "rgba(0, 0, 0, 0.9)",
            color: "white",
            padding: "8px 12px",
            borderRadius: "4px",
            fontSize: "12px",
            pointerEvents: "none",
            zIndex: 1000,
            maxWidth: "250px",
            boxShadow: "0 2px 8px rgba(0, 0, 0, 0.3)",
          }}
        >
          <div style={{ fontWeight: "bold", marginBottom: "4px" }}>
            {tooltipData.name} County
          </div>

          {tooltipData.isSplit && tooltipData.splitDetails ? (
            <div>
              <div
                style={{
                  color: themeColors.selectedColor || "#ff6b35",
                  fontWeight: "bold",
                  marginBottom: "4px",
                }}
              >
                Split County
              </div>
              <div style={{ fontSize: "11px" }}>
                {tooltipData.splitDetails.map((detail, index) => (
                  <div key={index} style={{ marginBottom: "2px" }}>
                    District {detail.districtId}:{" "}
                    {detail.population.toLocaleString()} people
                  </div>
                ))}
              </div>
            </div>
          ) : (
            tooltipData.districtLabel && (
              <div style={{ fontSize: "11px" }}>
                {tooltipData.districtLabel}
              </div>
            )
          )}
        </div>
      )}
    </>
  );
}

export default NebraskaMap;
